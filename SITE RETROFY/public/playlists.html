<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/playlists.css">
    <link rel="shortcut icon" href="./assets/imgHome/logo discofone sozinho .svg">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script> -->
    <!-- <script src="http://www.chartjs.org/samples/latest/utils.js"></script> -->
    <title>Retrofy</title>
</head>

<body>
    <div>
        <nav class="menu-lateral">
            <div class="botao_expandir">
                <i class="bi bi-music-note-list" id="botao-expandir"></i>
            </div>
            <ul>
                <li class="item-menu ativo">
                    <a href="playlists.html">
                        <span class="icon"><i class="bi bi-cassette"></i></span>
                        <span class="txt-link">Playlists</span>
                    </a>
                </li>
                <li class="item-menu">
                    <a href="quiz.html">
                        <span class="icon"><i class="bi bi-journal-check"></i></span>
                        <span class="txt-link">Quiz</span>
                    </a>
                </li>
                <li class="item-menu">
                    <a href="dashboard.html">
                        <span class="icon"><i class="bi bi-bar-chart-line"></i></span>
                        <span class="txt-link">Dashboard</span>
                    </a>
                </li>
                <li class="item-menu">
                    <a href="./quizRock/contaConfig.html">
                        <span class="icon"><i class="bi bi-person-circle"></i></span>
                        <span class="txt-link">Conta</span>
                    </a>
                </li>
                <li class="item-menu">
                    <a href="index.html">
                        <span class="icon-sair"><i class="bi bi-box-arrow-left"></i></span>
                        <span class="txt-link-sair">Sair</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <section>
    <div class="div-full">
        <div class="div-filha">
            <div class="container-inicial">
                <h2 class="titulo-inicial">Bem vindo, <span id="b_usuario"></span>!</h2>
                <p>Entre de cabeça em uma experiência musical inesquecível!</p>
            </div>
            <div class="container-principal"> 
                <p>Me siga no Spotify para mais playlists.</p>
                <a href="https://open.spotify.com/user/435kebln3yghz8sufqv9p8agt?si=95a3b53d7eb245d1" target="_blank">
                    <img class="spotify-perfil" src="../assets/imgHome/perfil_spotify.jpg" alt="Perfil da desenvolvedora" width="490px">
                </a>
            </div>
        </div>
        <div class="filha2">
            <h2 class="titulo-inicial">Playlists favoritas</h2>
            <canvas id="myChart"></canvas>
        </div>
    </div>
    <div class="retrofy">
        <div id="res"></div>
    </div>
</section>

<section id="pop">
    <h2 class="h2-sessao2">Playlists - Pop</h2>
    <div class="div-principal">
        <div class="playlist">
            <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/5ZmgTj6iBUF8okpIcUqguf?utm_source=generator" 
            width="300px" height="380px" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; 
            picture-in-picture" loading="lazy"></iframe>
            </div>
            <div class="playlist">
                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/6paoVG7PCZh5s6mdtbTUIL?utm_source=generator" 
                width="300px" height="380px" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; 
                picture-in-picture" loading="lazy"></iframe>
            </div>
            <div class="playlist">
                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/2fAVOHC433nWBnCUEiTGID?utm_source=generator"
                 width="300px" height="380px" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; 
                 picture-in-picture" loading="lazy"></iframe>
            </div>
        </div>
</section>
<section id="rock">
    <h2 class="h2-sessao2">Playlists - Rock</h2>
    <div class="div-principal">
        <div class="playlist">
            <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/786e1pLzWjQ6AOS9u6QSkH?utm_source=generator" 
            width="300px" height="380px" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen;
            picture-in-picture" loading="lazy"></iframe>
            </div>
            <div class="playlist">
                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/79pjQO9nLb7ZiXUc8lmjaO?utm_source=generator" 
                width="300px" height="380px" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; 
                picture-in-picture" loading="lazy"></iframe>
            </div>
            <div class="playlist">
                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/0qLQIB2GXdcVI9c2pXCc17?utm_source=generator" 
                width="300px" height="380px" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; 
                picture-in-picture" loading="lazy"></iframe>
            </div>
        </div>
</section>
<section id="postpunk">
    <h2 class="h2-sessao2">Playlists - Post Punk</h2>
    <div class="div-principal">
            <div class="playlist">
                <iframe style="border-radius:12px"
                    src="https://open.spotify.com/embed/playlist/3LQAId3dSC4h2PUgsvf887?utm_source=generator"
                    width="300px" height="380px" frameBorder="0" allowfullscreen=""
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                    loading="lazy"></iframe>
            </div>
        </div>
</section>
<footer>
    <img src="./assets/imgHome/logo_pequena.png" alt="" width="150px">
    <p>Desenvolvido por Nayra Belarmino©2023</p>
    <div class="redes">
      <a href="https://www.instagram.com/nayra_belarmino/"><img class="social" src="./assets/imgHome/instagram.png"
          alt="" width="40px"></a>
      <a href="https://github.com/nayrabelarmino"><img class="social" src="./assets/imgHome/linkedin.png" alt=""
          width="40px"></a>
      <a href="https://www.linkedin.com/in/nayrabelarmino/"><img class="social" src="./assets/imgHome/github.png" alt=""
          width="40px"></a>
    </div>
  </footer>
</body>

</html>

<script>

    b_usuario.innerHTML = sessionStorage.NOME_USUARIO

    let proximaAtualizacao;
    const ctx = document.getElementById('myChart');
    var dados = {
        labels: [],
        datasets: [
            {
                label: 'Votos',
                data: [],
                backgroundColor: ['#9384D1', '#917FB3', '#C9A7EB', '#ECC9EE', '#E8A0BF', '#4B3B83', '#002563'],
            }
        ]
    };

    var grafico = new Chart(ctx, {
        type: 'pie',
        data: dados
    })

    async function plotarGrafico() {
        console.log('iniciando plotagem do gráfico...');

        var dados = await fetch('/medidas/playlistFav').then(resposta => {
            if (resposta.ok) {
                return resposta.json()
            }
        })
        grafico.data.labels = []
        grafico.data.datasets[0].data = []
        dados.forEach(element => {
            grafico.data.labels.push(element.nome_playlist)
            grafico.data.datasets[0].data.push(element.voto)
        });

        grafico.update();
    }


    plotarGrafico()

    setInterval(plotarGrafico, 1000)

</script>

<script>

</script>



<script src="./js/playlists.js"></script>